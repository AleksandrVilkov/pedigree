CREATE USER pedigree_user WITH password 'root';
ALTER USER pedigree SUPERUSER;
CREATE DATABASE pedigree OWNER pedigree;
CREATE TABLE PEDIGREE
(
    id              int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name            varchar(80) NOT NULL,
    createdDate     date        NOT NULL,
    lastUpdatedDate date        NOT NULL,
    ownerUid        varchar(80) NOT NULL
);

CREATE TABLE FAMILYMEMBERS
(
    id                 int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    pedigreeid         int REFERENCES PEDIGREE (id),
    createdDate        date        NOT NULL,
    lastUpdatedDate    date        NOT NULL,
    firstName          varchar(80) NOT NULL,
    lastName           varchar(80) NOT NULL,
    middleName         varchar(80),
    maidenName         varchar(80),
    dob                date        NOT NULL,
    dod                date,
    mainPlaceResidence varchar(80),
    motherid           int,
    fatherid           int,
    hasChildren        bool,
    hasPartners        bool,
    note               varchar
);

CREATE TABLE CHILDREN_FAMILYMEMBER
(
    familymemberid int REFERENCES FAMILYMEMBERS (id) NOT NULL,
    childrenid     int                               NOT NULL
);

CREATE TABLE PARTNER_FAMALYMEMBER
(
    familymemberid int REFERENCES FAMILYMEMBERS (id) NOT NULL,
    partnerid      int                               NOT NULL
);

CREATE TABLE CLIENT
(
    id              int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    createdDate     date        NOT NULL,
    lastUpdatedDate date        NOT NULL,
    Role            varchar(80) NOT NULL,
    FirstName       varchar(80),
    LastName        varchar(80),
    Login           varchar(80) UNIQUE,
    Password        varchar(80) NOT NULL,
    HasPedigree     bool

);
